{"version":3,"sources":["../../src/pages/createpassword/createpassword.module.ts","../../src/pages/createpassword/createpassword.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CreatepasswordPage } from './createpassword';\n\n@NgModule({\n  declarations: [\n    CreatepasswordPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CreatepasswordPage),\n  ],\n})\nexport class CreatepasswordPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/createpassword/createpassword.module.ts","import { HttpProvider } from './../../providers/http/http';\n\nimport { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, FormControl} from \"@angular/forms\";\nimport { IonicPage, NavController, NavParams, LoadingController, AlertController } from 'ionic-angular';\nimport { User } from '../../models/user';\nimport { Storage } from '@ionic/storage';\n\n\n/**\n * Generated class for the CreatepasswordPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name: 'createpassword'\n})\n@Component({\n  selector: 'page-createpassword',\n  templateUrl: 'createpassword.html',\n})\nexport class CreatepasswordPage implements OnInit {\n  myForm: FormGroup;\n  userInfo: User;\n  USERID: string = null;\n  savePassword: string = null;\n  oldPassword: string = null;\n  newPassword: string = null;\n  newPassword2: string = null;\n  notValid: boolean;\n  saveUser: User;\n\n  constructor(public formBuilder: FormBuilder, public navCtrl: NavController, public navParams: NavParams, private storage: Storage, private httpProvider: HttpProvider, private loadingController: LoadingController, private alertCtrl: AlertController) {\n    let u= navParams.get('userInfo');\n    this.userInfo =u[0];\n    this.USERID = this.userInfo.USERID;\n    //console.log(this.USERID);\n    this.storage.get(\"userInfo\").then((userInfo) => {\n      this.saveUser = userInfo;\n    });\n\n    this.notValid = false;\n    // this.savePassword = navParams.get('password');\n    // this.http.login(this.userInfo.USERID, this.savePassword).subscribe(result => {\n    //   let info = result.json();\n    //   this.userInfo = info;\n    // });\n  }\n\n  ngOnInit(): any {\n\n  }\n\n  onSubmit() {\n    //console.log('submitting form');\n    //console.log(this.USERID);\n    //console.log(this.oldPassword);\n    //console.log(this.newPassword);\n    //console.log(this.newPassword2);\n    //console.log(this.saveUser)\n    //console.log((!this.USERID || !this.oldPassword || !this.newPassword || !this.newPassword2));\n    if(!this.USERID){\n      this.alertPR(\"กรุณากรอกข้อมูลให้ถูกต้อง\");\n      this.notValid = true;\n    }else if(!this.oldPassword){\n      this.alertPR(\"กรุณากรอกข้อมูลให้ถูกต้อง\");\n      this.notValid = true;\n    }\n    else if(!this.newPassword){\n      this.alertPR(\"กรุณากรอกข้อมูลให้ถูกต้อง\");\n      this.notValid = true;\n    }\n    else if(!this.newPassword2){\n      this.alertPR(\"กรุณากรอกข้อมูลให้ถูกต้อง\");\n      this.notValid = true;\n    }\n    else if (this.USERID == this.saveUser.USERID) {\n      if (this.oldPassword == this.saveUser.PASSWORD) {\n        if (this.newPassword == this.newPassword2) {\n          let loading = this.loadingController.create({\n            content: \"กำลังเชื่อมต่อกับระบบ กรุณารอสักครู่...\",\n          });\n          loading.present();\n          this.saveUser.PASSWORD = this.newPassword;\n          this.httpProvider.updateUserinfo(this.saveUser).subscribe((result) => {\n            loading.dismiss();\n            this.storage.set(\"userInfo\",this.saveUser).then(()=>{\n              this.navCtrl.push('confirmuser', { 'userInfo': this.saveUser }, { animate: false });\n            }) \n\n          }, (err) => {\n            loading.dismiss();\n          })\n\n        } else {\n          this.alertPR(\"กรุณากรอกข้อมูล รหัสผ่านให้ตรงกัน\");\n        }\n      } else {\n        this.alertPR(\"กรุณากรอกข้อมูล รหัสผ่านให้ถูกต้อง\");\n      }\n    } else {\n      this.alertPR(\"กรุณากรอกข้อมูล รหัสพนักงานให้ถูกต้อง\");\n    }\n  \n      \n\n\n  }\nalertPR(msg) {\n  const alert = this.alertCtrl.create({\n    title: msg,\n    buttons: [{\n      text: 'ยืนยัน',\n      handler: () => {\n\n      }\n    }]\n  });\n  alert.present();\n}\nisValid(field: string) {\n  // let formField = this.myForm.find(field);\n  // return formField.valid || formField.pristine;\n}\n\nnameValidator(control: FormControl): { [s: string]: boolean } {\n  if (control.value !== '') {\n    if (control.value.match(\"^\\d{7}$\")) {\n      return { invalidName: true };\n    }\n  }\n}\n\n\n// passwordValidator(control: FormControl): { [s: string]: boolean } {\n//   if (control.value == this.savePassword) {\n//     return { invalidPassword: true };\n//   }\n// }\ngoBack(value: any) {\n  this.navCtrl.pop({ animate: false });\n}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/createpassword/createpassword.ts"],"sourceRoot":""}