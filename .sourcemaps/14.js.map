{"version":3,"sources":["../../src/pages/createpassword/createpassword.module.ts","../../src/pages/createpassword/createpassword.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACM;AAUtD;IAAA;IAAuC,CAAC;IAA3B,wBAAwB;QARpC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2EAAkB;aACnB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2EAAkB,CAAC;aAC7C;SACF,CAAC;OACW,wBAAwB,CAAG;IAAD,+BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACZsB;AAET;AACkB;AACyB;AAEpD;AAGzC;;;;;GAKG;AAOH;IAWE,4BAAmB,WAAwB,EAAS,OAAsB,EAAS,SAAoB,EAAU,OAAgB,EAAU,YAA0B,EAAU,iBAAoC,EAAU,SAA0B;QAAvP,iBAeC;QAfkB,gBAAW,GAAX,WAAW,CAAa;QAAS,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAU,YAAO,GAAP,OAAO,CAAS;QAAU,iBAAY,GAAZ,YAAY,CAAc;QAAU,sBAAiB,GAAjB,iBAAiB,CAAmB;QAAU,cAAS,GAAT,SAAS,CAAiB;QARvP,WAAM,GAAW,IAAI,CAAC;QACtB,iBAAY,GAAW,IAAI,CAAC;QAC5B,gBAAW,GAAW,IAAI,CAAC;QAC3B,gBAAW,GAAW,IAAI,CAAC;QAC3B,iBAAY,GAAW,IAAI,CAAC;QAK1B,IAAI,CAAC,GAAE,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACjC,IAAI,CAAC,QAAQ,GAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACpB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;QACnC,2BAA2B;QAC3B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YACzC,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC3B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,iDAAiD;QACjD,iFAAiF;QACjF,8BAA8B;QAC9B,0BAA0B;QAC1B,MAAM;IACR,CAAC;IAED,qCAAQ,GAAR;IAEA,CAAC;IAED,qCAAQ,GAAR;QAAA,iBAsDC;QArDC,iCAAiC;QACjC,2BAA2B;QAC3B,gCAAgC;QAChC,gCAAgC;QAChC,iCAAiC;QACjC,4BAA4B;QAC5B,8FAA8F;QAC9F,EAAE,EAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAC;YACf,IAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,CAAC;YAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACvB,CAAC;QAAA,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,WAAW,CAAC,EAAC;YAC1B,IAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,CAAC;YAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACvB,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,WAAW,CAAC,EAAC;YACzB,IAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,CAAC;YAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACvB,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,YAAY,CAAC,EAAC;YAC1B,IAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,CAAC;YAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACvB,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YAC7C,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC/C,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;oBAC1C,IAAI,SAAO,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;wBAC1C,OAAO,EAAE,yCAAyC;qBACnD,CAAC,CAAC;oBACH,SAAO,CAAC,OAAO,EAAE,CAAC;oBAClB,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC;oBAC1C,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,UAAC,MAAM;wBAC/D,SAAO,CAAC,OAAO,EAAE,CAAC;wBAClB,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC;4BAC9C,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,UAAU,EAAE,KAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;wBACtF,CAAC,CAAC;oBAEJ,CAAC,EAAE,UAAC,GAAG;wBACL,SAAO,CAAC,OAAO,EAAE,CAAC;oBACpB,CAAC,CAAC;gBAEJ,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,OAAO,CAAC,mCAAmC,CAAC,CAAC;gBACpD,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,OAAO,CAAC,oCAAoC,CAAC,CAAC;YACrD,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,uCAAuC,CAAC,CAAC;QACxD,CAAC;IAKH,CAAC;IACH,oCAAO,GAAP,UAAQ,GAAG;QACT,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAClC,KAAK,EAAE,GAAG;YACV,OAAO,EAAE,CAAC;oBACR,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;oBAET,CAAC;iBACF,CAAC;SACH,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IACD,oCAAO,GAAP,UAAQ,KAAa;QACnB,2CAA2C;QAC3C,gDAAgD;IAClD,CAAC;IAED,0CAAa,GAAb,UAAc,OAAoB;QAChC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,KAAK,EAAE,CAAC,CAAC,CAAC;YACzB,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBACnC,MAAM,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;YAC/B,CAAC;QACH,CAAC;IACH,CAAC;IAGD,sEAAsE;IACtE,8CAA8C;IAC9C,wCAAwC;IACxC,MAAM;IACN,IAAI;IACJ,mCAAM,GAAN,UAAO,KAAU;QACf,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;IACvC,CAAC;IAxHY,kBAAkB;QAJ9B,wEAAS,CAAC;YACT,QAAQ,EAAE,qBAAqB;WACG;SACnC,CAAC;2BAYuP;OAX5O,kBAAkB,CAyH9B;IAAD,CAAC;AAAA;SAzHY,kBAAkB,e","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { CreatepasswordPage } from './createpassword';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CreatepasswordPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(CreatepasswordPage),\r\n  ],\r\n})\r\nexport class CreatepasswordPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/createpassword/createpassword.module.ts","import { HttpProvider } from './../../providers/http/http';\r\n\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, FormControl} from \"@angular/forms\";\r\nimport { IonicPage, NavController, NavParams, LoadingController, AlertController } from 'ionic-angular';\r\nimport { User } from '../../models/user';\r\nimport { Storage } from '@ionic/storage';\r\n\r\n\r\n/**\r\n * Generated class for the CreatepasswordPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage({\r\n  name: 'createpassword'\r\n})\r\n@Component({\r\n  selector: 'page-createpassword',\r\n  templateUrl: 'createpassword.html',\r\n})\r\nexport class CreatepasswordPage implements OnInit {\r\n  myForm: FormGroup;\r\n  userInfo: User;\r\n  USERID: string = null;\r\n  savePassword: string = null;\r\n  oldPassword: string = null;\r\n  newPassword: string = null;\r\n  newPassword2: string = null;\r\n  notValid: boolean;\r\n  saveUser: User;\r\n\r\n  constructor(public formBuilder: FormBuilder, public navCtrl: NavController, public navParams: NavParams, private storage: Storage, private httpProvider: HttpProvider, private loadingController: LoadingController, private alertCtrl: AlertController) {\r\n    let u= navParams.get('userInfo');\r\n    this.userInfo =u[0];\r\n    this.USERID = this.userInfo.USERID;\r\n    //console.log(this.USERID);\r\n    this.storage.get(\"userInfo\").then((userInfo) => {\r\n      this.saveUser = userInfo;\r\n    });\r\n\r\n    this.notValid = false;\r\n    // this.savePassword = navParams.get('password');\r\n    // this.http.login(this.userInfo.USERID, this.savePassword).subscribe(result => {\r\n    //   let info = result.json();\r\n    //   this.userInfo = info;\r\n    // });\r\n  }\r\n\r\n  ngOnInit(): any {\r\n\r\n  }\r\n\r\n  onSubmit() {\r\n    //console.log('submitting form');\r\n    //console.log(this.USERID);\r\n    //console.log(this.oldPassword);\r\n    //console.log(this.newPassword);\r\n    //console.log(this.newPassword2);\r\n    //console.log(this.saveUser)\r\n    //console.log((!this.USERID || !this.oldPassword || !this.newPassword || !this.newPassword2));\r\n    if(!this.USERID){\r\n      this.alertPR(\"กรุณากรอกข้อมูลให้ถูกต้อง\");\r\n      this.notValid = true;\r\n    }else if(!this.oldPassword){\r\n      this.alertPR(\"กรุณากรอกข้อมูลให้ถูกต้อง\");\r\n      this.notValid = true;\r\n    }\r\n    else if(!this.newPassword){\r\n      this.alertPR(\"กรุณากรอกข้อมูลให้ถูกต้อง\");\r\n      this.notValid = true;\r\n    }\r\n    else if(!this.newPassword2){\r\n      this.alertPR(\"กรุณากรอกข้อมูลให้ถูกต้อง\");\r\n      this.notValid = true;\r\n    }\r\n    else if (this.USERID == this.saveUser.USERID) {\r\n      if (this.oldPassword == this.saveUser.PASSWORD) {\r\n        if (this.newPassword == this.newPassword2) {\r\n          let loading = this.loadingController.create({\r\n            content: \"กำลังเชื่อมต่อกับระบบ กรุณารอสักครู่...\",\r\n          });\r\n          loading.present();\r\n          this.saveUser.PASSWORD = this.newPassword;\r\n          this.httpProvider.updateUserinfo(this.saveUser).subscribe((result) => {\r\n            loading.dismiss();\r\n            this.storage.set(\"userInfo\",this.saveUser).then(()=>{\r\n              this.navCtrl.push('confirmuser', { 'userInfo': this.saveUser }, { animate: false });\r\n            }) \r\n\r\n          }, (err) => {\r\n            loading.dismiss();\r\n          })\r\n\r\n        } else {\r\n          this.alertPR(\"กรุณากรอกข้อมูล รหัสผ่านให้ตรงกัน\");\r\n        }\r\n      } else {\r\n        this.alertPR(\"กรุณากรอกข้อมูล รหัสผ่านให้ถูกต้อง\");\r\n      }\r\n    } else {\r\n      this.alertPR(\"กรุณากรอกข้อมูล รหัสพนักงานให้ถูกต้อง\");\r\n    }\r\n  \r\n      \r\n\r\n\r\n  }\r\nalertPR(msg) {\r\n  const alert = this.alertCtrl.create({\r\n    title: msg,\r\n    buttons: [{\r\n      text: 'ยืนยัน',\r\n      handler: () => {\r\n\r\n      }\r\n    }]\r\n  });\r\n  alert.present();\r\n}\r\nisValid(field: string) {\r\n  // let formField = this.myForm.find(field);\r\n  // return formField.valid || formField.pristine;\r\n}\r\n\r\nnameValidator(control: FormControl): { [s: string]: boolean } {\r\n  if (control.value !== '') {\r\n    if (control.value.match(\"^\\d{7}$\")) {\r\n      return { invalidName: true };\r\n    }\r\n  }\r\n}\r\n\r\n\r\n// passwordValidator(control: FormControl): { [s: string]: boolean } {\r\n//   if (control.value == this.savePassword) {\r\n//     return { invalidPassword: true };\r\n//   }\r\n// }\r\ngoBack(value: any) {\r\n  this.navCtrl.pop({ animate: false });\r\n}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/createpassword/createpassword.ts"],"sourceRoot":""}